// ‰øÆÂ§ç WindowsÁâà Êí≠ÊîæËΩ¨ÂúàÂúà
import { load, _ } from './lib/cat.js';

let key = 'duboku';
let HOST = 'https://u.duboku.io';
// let HOST = 'https://www.duboku.tv';
let siteKey = '';
let siteType = 0;

const MOBILE_UA = 'Mozilla/5.0 (Linux; Android 11; M2007J3SC Build/RKQ1.200826.002; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/77.0.3865.120 MQQBrowser/6.2 TBS/045714 Mobile Safari/537.36';

async function request(reqUrl, agentSp) {
    let res = await req(reqUrl, {
        method: 'get',
        headers: {
            'User-Agent': agentSp || MOBILE_UA,
            'Referer': HOST
        },
    });
    return res.content;
}

// cfg = {skey: siteKey, ext: extend}
async function init(cfg) {
    siteKey = cfg.skey;
    siteType = cfg.stype;
}

async function home(filter) {
    const html = await request(HOST);
    const $ = load(html);
    const class_parse = $('ul.nav-list > li > a[href*=vodtype]');
    let classes = [];
    classes = _.map(class_parse, (cls) => {
        let typeId = cls.attribs['href'];
        typeId = typeId.substring(typeId.lastIndexOf('/') + 1).replace('.html','');
        return {
            type_id: typeId,
            type_name: cls.children[0].data,
        };
    });
    let filterObj = {
		"2":[{"key":"cateId","name":"Á±ªÂûã","value":[{"n":"ÂÖ®ÈÉ®","v":"2"},{"n":"ÈôÜÂâß","v":"13"},{"n":"Êó•Èü©Ââß","v":"15"},{"n":"Áü≠Ââß","v":"21"},{"n":"Âè∞Ê≥∞Ââß","v":"14"},{"n":"Ê∏ØÂâß","v":"20"}]},{"key":"class","name":"ÂâßÊÉÖ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÊÇ¨Áñë","v":"ÊÇ¨Áñë"},{"n":"Ê≠¶‰æ†","v":"Ê≠¶‰æ†"},{"n":"ÁßëÂπª","v":"ÁßëÂπª"},{"n":"ÈÉΩÂ∏Ç","v":"ÈÉΩÂ∏Ç"},{"n":"Áà±ÊÉÖ","v":"Áà±ÊÉÖ"},{"n":"Âè§Ë£Ö","v":"Âè§Ë£Ö"},{"n":"Êàò‰∫â","v":"Êàò‰∫â"},{"n":"ÈùíÊò•","v":"ÈùíÊò•"},{"n":"ÂÅ∂ÂÉè","v":"ÂÅ∂ÂÉè"},{"n":"ÂñúÂâß","v":"ÂñúÂâß"},{"n":"ÂÆ∂Â∫≠","v":"ÂÆ∂Â∫≠"},{"n":"ÁäØÁΩ™","v":"ÁäØÁΩ™"},{"n":"Â•áÂπª","v":"Â•áÂπª"},{"n":"ÂâßÊÉÖ","v":"ÂâßÊÉÖ"},{"n":"‰π°Êùë","v":"‰π°Êùë"},{"n":"Âπ¥‰ª£","v":"Âπ¥‰ª£"},{"n":"Ë≠¶Âå™","v":"Ë≠¶Âå™"},{"n":"Ë∞çÊàò","v":"Ë∞çÊàò"},{"n":"ÂÜíÈô©","v":"ÂÜíÈô©"},{"n":"ÁΩ™Ê°à","v":"ÁΩ™Ê°à"},{"n":"ÂÆ´Âª∑","v":"ÂÆ´Âª∑"},{"n":"BL","v":"BL"}]},{"key":"area","name":"Âú∞Âå∫","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"üá®üá≥‰∏≠ÂõΩ","v":"ÂÜÖÂú∞"},{"n":"üá∞üá∑Èü©ÂõΩ","v":"Èü©ÂõΩ"},{"n":"üá≠üá∞È¶ôÊ∏Ø","v":"È¶ôÊ∏Ø"},{"n":"üáπüáºÂè∞Êπæ","v":"Âè∞Êπæ"},{"n":"üá∫üá∏ÁæéÂõΩ","v":"ÁæéÂõΩ"},{"n":"Ëã±ÂõΩ","v":"Ëã±ÂõΩ"},{"n":"Â∑¥Ë•ø","v":"Â∑¥Ë•ø"},{"n":"Ê≥∞ÂõΩ","v":"Ê≥∞ÂõΩ"},{"n":"Ê≥ïÂõΩ","v":"Ê≥ïÂõΩ"},{"n":"üáØüáµÊó•Êú¨","v":"Êó•Êú¨"},{"n":"Ëç∑ÂÖ∞","v":"Ëç∑ÂÖ∞"}]},{"key":"year","name":"Âπ¥‰ªΩ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"}]},{"key":"lang","name":"ËØ≠Ë®Ä","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÂõΩËØ≠","v":"ÂõΩËØ≠"},{"n":"Ëã±ËØ≠","v":"Ëã±ËØ≠"},{"n":"Á≤§ËØ≠","v":"Á≤§ËØ≠"},{"n":"Èü©ËØ≠","v":"Èü©ËØ≠"},{"n":"Ê≥∞ËØ≠","v":"Ê≥∞ËØ≠"},{"n":"Ê≥ïËØ≠","v":"Ê≥ïËØ≠"},{"n":"Êó•ËØ≠","v":"Êó•ËØ≠"}]},{"key":"letter","name":"Â≠óÊØç","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"A","v":"A"},{"n":"B","v":"B"},{"n":"C","v":"C"},{"n":"D","v":"D"},{"n":"E","v":"E"},{"n":"F","v":"F"},{"n":"G","v":"G"},{"n":"H","v":"H"},{"n":"I","v":"I"},{"n":"J","v":"J"},{"n":"K","v":"K"},{"n":"L","v":"L"},{"n":"M","v":"M"},{"n":"N","v":"N"},{"n":"O","v":"O"},{"n":"P","v":"P"},{"n":"Q","v":"Q"},{"n":"R","v":"R"},{"n":"S","v":"S"},{"n":"T","v":"T"},{"n":"U","v":"U"},{"n":"V","v":"V"},{"n":"W","v":"W"},{"n":"X","v":"X"},{"n":"Y","v":"Y"},{"n":"Z","v":"Z"}]},{"key":"by","name":"ÊéíÂ∫è","value":[{"n":"Êó∂Èó¥","v":"time"},{"n":"‰∫∫Ê∞î","v":"hits"},{"n":"ËØÑÂàÜ","v":"score"}]}],
		"3":[{"key":"class","name":"ÂâßÊÉÖ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"Áúü‰∫∫ÁßÄ","v":"Áúü‰∫∫ÁßÄ"},{"n":"ÈÄâÁßÄ","v":"ÈÄâÁßÄ"},{"n":"Á´ûÊºî","v":"Á´ûÊºî"},{"n":"ÊÉÖÊÑü","v":"ÊÉÖÊÑü"},{"n":"ËÆøË∞à","v":"ËÆøË∞à"},{"n":"Êí≠Êä•","v":"Êí≠Êä•"},{"n":"ÊóÖÊ∏∏","v":"ÊóÖÊ∏∏"},{"n":"Èü≥‰πê","v":"Èü≥‰πê"},{"n":"ÁæéÈ£ü","v":"ÁæéÈ£ü"},{"n":"Á∫™ÂÆû","v":"Á∫™ÂÆû"},{"n":"Êõ≤Ëâ∫","v":"Êõ≤Ëâ∫"},{"n":"ÁîüÊ¥ª","v":"ÁîüÊ¥ª"},{"n":"Ê∏∏Êàè‰∫íÂä®","v":"Ê∏∏Êàè‰∫íÂä®"}]},{"key":"area","name":"Âú∞Âå∫","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"üá®üá≥‰∏≠ÂõΩ","v":"ÂÜÖÂú∞"},{"n":"üá≠üá∞È¶ôÊ∏Ø","v":"È¶ôÊ∏Ø"},{"n":"üáπüáºÂè∞Êπæ","v":"Âè∞Êπæ"},{"n":"üá∞üá∑Èü©ÂõΩ","v":"Èü©ÂõΩ"},{"n":"üá∫üá∏ÁæéÂõΩ","v":"ÁæéÂõΩ"}]},{"key":"year","name":"Âπ¥‰ªΩ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"}]},{"key":"lang","name":"ËØ≠Ë®Ä","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÂõΩËØ≠","v":"ÂõΩËØ≠"},{"n":"Ëã±ËØ≠","v":"Ëã±ËØ≠"},{"n":"Á≤§ËØ≠","v":"Á≤§ËØ≠"},{"n":"ÈóΩÂçóËØ≠","v":"ÈóΩÂçóËØ≠"},{"n":"Èü©ËØ≠","v":"Èü©ËØ≠"},{"n":"Êó•ËØ≠","v":"Êó•ËØ≠"},{"n":"ÂÖ∂ÂÆÉ","v":"ÂÖ∂ÂÆÉ"}]},{"key":"letter","name":"Â≠óÊØç","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"A","v":"A"},{"n":"B","v":"B"},{"n":"C","v":"C"},{"n":"D","v":"D"},{"n":"E","v":"E"},{"n":"F","v":"F"},{"n":"G","v":"G"},{"n":"H","v":"H"},{"n":"I","v":"I"},{"n":"J","v":"J"},{"n":"K","v":"K"},{"n":"L","v":"L"},{"n":"M","v":"M"},{"n":"N","v":"N"},{"n":"O","v":"O"},{"n":"P","v":"P"},{"n":"Q","v":"Q"},{"n":"R","v":"R"},{"n":"S","v":"S"},{"n":"T","v":"T"},{"n":"U","v":"U"},{"n":"V","v":"V"},{"n":"W","v":"W"},{"n":"X","v":"X"},{"n":"Y","v":"Y"},{"n":"Z","v":"Z"}]},{"key":"by","name":"ÊéíÂ∫è","value":[{"n":"Êó∂Èó¥","v":"time"},{"n":"‰∫∫Ê∞î","v":"hits"},{"n":"ËØÑÂàÜ","v":"score"}]}],
		"4":[{"key":"class","name":"ÂâßÊÉÖ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÁéÑÂπª","v":"ÁéÑÂπª"},{"n":"Ê≠¶‰æ†","v":"Ê≠¶‰æ†"},{"n":"ÊÉÖÊÑü","v":"ÊÉÖÊÑü"},{"n":"ÁßëÂπª","v":"ÁßëÂπª"},{"n":"ÁÉ≠Ë°Ä","v":"ÁÉ≠Ë°Ä"},{"n":"Êé®ÁêÜ","v":"Êé®ÁêÜ"},{"n":"ÊêûÁ¨ë","v":"ÊêûÁ¨ë"},{"n":"ÂÜíÈô©","v":"ÂÜíÈô©"},{"n":"ËêùËéâ","v":"ËêùËéâ"},{"n":"Ê†°Âõ≠","v":"Ê†°Âõ≠"},{"n":"Âä®‰Ωú","v":"Âä®‰Ωú"},{"n":"Êú∫Êàò","v":"Êú∫Êàò"},{"n":"ËøêÂä®","v":"ËøêÂä®"},{"n":"Êàò‰∫â","v":"Êàò‰∫â"},{"n":"Â∞ëÂπ¥","v":"Â∞ëÂπ¥"},{"n":"Â∞ëÂ•≥","v":"Â∞ëÂ•≥"},{"n":"Á§æ‰ºö","v":"Á§æ‰ºö"},{"n":"‰∫≤Â≠ê","v":"‰∫≤Â≠ê"},{"n":"ÁõäÊô∫","v":"ÁõäÊô∫"},{"n":"Âä±Âøó","v":"Âä±Âøó"},{"n":"ÂÖ∂‰ªñ","v":"ÂÖ∂‰ªñ"}]},{"key":"area","name":"Âú∞Âå∫","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÂõΩ‰∫ß","v":"ÂõΩ‰∫ß"},{"n":"üáØüáµÊó•Êú¨","v":"Êó•Êú¨"},{"n":"üá∫üá∏ÁæéÂõΩ","v":"ÁæéÂõΩ"},{"n":"Ê≥ïÂõΩ","v":"Ê≥ïÂõΩ"},{"n":"ÂÖ∂‰ªñ","v":"ÂÖ∂‰ªñ"}]},{"key":"year","name":"Âπ¥‰ªΩ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"}]},{"key":"lang","name":"ËØ≠Ë®Ä","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÂõΩËØ≠","v":"ÂõΩËØ≠"},{"n":"Ëã±ËØ≠","v":"Ëã±ËØ≠"},{"n":"Á≤§ËØ≠","v":"Á≤§ËØ≠"},{"n":"ÈóΩÂçóËØ≠","v":"ÈóΩÂçóËØ≠"},{"n":"Èü©ËØ≠","v":"Èü©ËØ≠"},{"n":"Êó•ËØ≠","v":"Êó•ËØ≠"},{"n":"ÂÖ∂ÂÆÉ","v":"ÂÖ∂ÂÆÉ"}]},{"key":"letter","name":"Â≠óÊØç","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"A","v":"A"},{"n":"B","v":"B"},{"n":"C","v":"C"},{"n":"D","v":"D"},{"n":"E","v":"E"},{"n":"F","v":"F"},{"n":"G","v":"G"},{"n":"H","v":"H"},{"n":"I","v":"I"},{"n":"J","v":"J"},{"n":"K","v":"K"},{"n":"L","v":"L"},{"n":"M","v":"M"},{"n":"N","v":"N"},{"n":"O","v":"O"},{"n":"P","v":"P"},{"n":"Q","v":"Q"},{"n":"R","v":"R"},{"n":"S","v":"S"},{"n":"T","v":"T"},{"n":"U","v":"U"},{"n":"V","v":"V"},{"n":"W","v":"W"},{"n":"X","v":"X"},{"n":"Y","v":"Y"},{"n":"Z","v":"Z"}]},{"key":"by","name":"ÊéíÂ∫è","value":[{"n":"Êó∂Èó¥","v":"time"},{"n":"‰∫∫Ê∞î","v":"hits"},{"n":"ËØÑÂàÜ","v":"score"}]}],
		"13":[{"key":"class","name":"ÂâßÊÉÖ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÊÇ¨Áñë","v":"ÊÇ¨Áñë"},{"n":"Ê≠¶‰æ†","v":"Ê≠¶‰æ†"},{"n":"ÁßëÂπª","v":"ÁßëÂπª"},{"n":"ÈÉΩÂ∏Ç","v":"ÈÉΩÂ∏Ç"},{"n":"Áà±ÊÉÖ","v":"Áà±ÊÉÖ"},{"n":"Âè§Ë£Ö","v":"Âè§Ë£Ö"},{"n":"Êàò‰∫â","v":"Êàò‰∫â"},{"n":"ÈùíÊò•","v":"ÈùíÊò•"},{"n":"ÂÅ∂ÂÉè","v":"ÂÅ∂ÂÉè"},{"n":"ÂñúÂâß","v":"ÂñúÂâß"},{"n":"ÂÆ∂Â∫≠","v":"ÂÆ∂Â∫≠"},{"n":"ÁäØÁΩ™","v":"ÁäØÁΩ™"},{"n":"Â•áÂπª","v":"Â•áÂπª"},{"n":"ÂâßÊÉÖ","v":"ÂâßÊÉÖ"},{"n":"‰π°Êùë","v":"‰π°Êùë"},{"n":"Âπ¥‰ª£","v":"Âπ¥‰ª£"},{"n":"Ë≠¶Âå™","v":"Ë≠¶Âå™"},{"n":"Ë∞çÊàò","v":"Ë∞çÊàò"},{"n":"ÂÜíÈô©","v":"ÂÜíÈô©"},{"n":"ÁΩ™Ê°à","v":"ÁΩ™Ê°à"},{"n":"ÂÆ´Âª∑","v":"ÂÆ´Âª∑"},{"n":"BL","v":"BL"}]},{"key":"year","name":"Âπ¥‰ªΩ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"}]},{"key":"letter","name":"Â≠óÊØç","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"A","v":"A"},{"n":"B","v":"B"},{"n":"C","v":"C"},{"n":"D","v":"D"},{"n":"E","v":"E"},{"n":"F","v":"F"},{"n":"G","v":"G"},{"n":"H","v":"H"},{"n":"I","v":"I"},{"n":"J","v":"J"},{"n":"K","v":"K"},{"n":"L","v":"L"},{"n":"M","v":"M"},{"n":"N","v":"N"},{"n":"O","v":"O"},{"n":"P","v":"P"},{"n":"Q","v":"Q"},{"n":"R","v":"R"},{"n":"S","v":"S"},{"n":"T","v":"T"},{"n":"U","v":"U"},{"n":"V","v":"V"},{"n":"W","v":"W"},{"n":"X","v":"X"},{"n":"Y","v":"Y"},{"n":"Z","v":"Z"}]},{"key":"by","name":"ÊéíÂ∫è","value":[{"n":"Êó∂Èó¥","v":"time"},{"n":"‰∫∫Ê∞î","v":"hits"},{"n":"ËØÑÂàÜ","v":"score"}]}],
		"15":[{"key":"class","name":"ÂâßÊÉÖ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÊÇ¨Áñë","v":"ÊÇ¨Áñë"},{"n":"Ê≠¶‰æ†","v":"Ê≠¶‰æ†"},{"n":"ÁßëÂπª","v":"ÁßëÂπª"},{"n":"ÈÉΩÂ∏Ç","v":"ÈÉΩÂ∏Ç"},{"n":"Áà±ÊÉÖ","v":"Áà±ÊÉÖ"},{"n":"Âè§Ë£Ö","v":"Âè§Ë£Ö"},{"n":"Êàò‰∫â","v":"Êàò‰∫â"},{"n":"ÈùíÊò•","v":"ÈùíÊò•"},{"n":"ÂÅ∂ÂÉè","v":"ÂÅ∂ÂÉè"},{"n":"ÂñúÂâß","v":"ÂñúÂâß"},{"n":"ÂÆ∂Â∫≠","v":"ÂÆ∂Â∫≠"},{"n":"ÁäØÁΩ™","v":"ÁäØÁΩ™"},{"n":"Â•áÂπª","v":"Â•áÂπª"},{"n":"ÂâßÊÉÖ","v":"ÂâßÊÉÖ"},{"n":"‰π°Êùë","v":"‰π°Êùë"},{"n":"Âπ¥‰ª£","v":"Âπ¥‰ª£"},{"n":"Ë≠¶Âå™","v":"Ë≠¶Âå™"},{"n":"Ë∞çÊàò","v":"Ë∞çÊàò"},{"n":"ÂÜíÈô©","v":"ÂÜíÈô©"},{"n":"ÁΩ™Ê°à","v":"ÁΩ™Ê°à"},{"n":"ÂÆ´Âª∑","v":"ÂÆ´Âª∑"},{"n":"BL","v":"BL"}]},{"key":"area","name":"Âú∞Âå∫","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"üá∞üá∑Èü©ÂõΩ","v":"Èü©ÂõΩ"},{"n":"üáØüáµÊó•Êú¨","v":"Êó•Êú¨"}]},{"key":"year","name":"Âπ¥‰ªΩ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"}]},{"key":"letter","name":"Â≠óÊØç","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"A","v":"A"},{"n":"B","v":"B"},{"n":"C","v":"C"},{"n":"D","v":"D"},{"n":"E","v":"E"},{"n":"F","v":"F"},{"n":"G","v":"G"},{"n":"H","v":"H"},{"n":"I","v":"I"},{"n":"J","v":"J"},{"n":"K","v":"K"},{"n":"L","v":"L"},{"n":"M","v":"M"},{"n":"N","v":"N"},{"n":"O","v":"O"},{"n":"P","v":"P"},{"n":"Q","v":"Q"},{"n":"R","v":"R"},{"n":"S","v":"S"},{"n":"T","v":"T"},{"n":"U","v":"U"},{"n":"V","v":"V"},{"n":"W","v":"W"},{"n":"X","v":"X"},{"n":"Y","v":"Y"},{"n":"Z","v":"Z"}]},{"key":"by","name":"ÊéíÂ∫è","value":[{"n":"Êó∂Èó¥","v":"time"},{"n":"‰∫∫Ê∞î","v":"hits"},{"n":"ËØÑÂàÜ","v":"score"}]}],
		"21":[{"key":"class","name":"ÂâßÊÉÖ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÊÇ¨Áñë","v":"ÊÇ¨Áñë"},{"n":"Ê≠¶‰æ†","v":"Ê≠¶‰æ†"},{"n":"ÁßëÂπª","v":"ÁßëÂπª"},{"n":"ÈÉΩÂ∏Ç","v":"ÈÉΩÂ∏Ç"},{"n":"Áà±ÊÉÖ","v":"Áà±ÊÉÖ"},{"n":"Âè§Ë£Ö","v":"Âè§Ë£Ö"},{"n":"Êàò‰∫â","v":"Êàò‰∫â"},{"n":"ÈùíÊò•","v":"ÈùíÊò•"},{"n":"ÂÅ∂ÂÉè","v":"ÂÅ∂ÂÉè"},{"n":"ÂñúÂâß","v":"ÂñúÂâß"},{"n":"ÂÆ∂Â∫≠","v":"ÂÆ∂Â∫≠"},{"n":"ÁäØÁΩ™","v":"ÁäØÁΩ™"},{"n":"Â•áÂπª","v":"Â•áÂπª"},{"n":"ÂâßÊÉÖ","v":"ÂâßÊÉÖ"},{"n":"‰π°Êùë","v":"‰π°Êùë"},{"n":"Âπ¥‰ª£","v":"Âπ¥‰ª£"},{"n":"Ë≠¶Âå™","v":"Ë≠¶Âå™"},{"n":"Ë∞çÊàò","v":"Ë∞çÊàò"},{"n":"ÂÜíÈô©","v":"ÂÜíÈô©"},{"n":"ÁΩ™Ê°à","v":"ÁΩ™Ê°à"},{"n":"ÂÆ´Âª∑","v":"ÂÆ´Âª∑"},{"n":"BL","v":"BL"}]},{"key":"year","name":"Âπ¥‰ªΩ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"}]},{"key":"letter","name":"Â≠óÊØç","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"A","v":"A"},{"n":"B","v":"B"},{"n":"C","v":"C"},{"n":"D","v":"D"},{"n":"E","v":"E"},{"n":"F","v":"F"},{"n":"G","v":"G"},{"n":"H","v":"H"},{"n":"I","v":"I"},{"n":"J","v":"J"},{"n":"K","v":"K"},{"n":"L","v":"L"},{"n":"M","v":"M"},{"n":"N","v":"N"},{"n":"O","v":"O"},{"n":"P","v":"P"},{"n":"Q","v":"Q"},{"n":"R","v":"R"},{"n":"S","v":"S"},{"n":"T","v":"T"},{"n":"U","v":"U"},{"n":"V","v":"V"},{"n":"W","v":"W"},{"n":"X","v":"X"},{"n":"Y","v":"Y"},{"n":"Z","v":"Z"}]},{"key":"by","name":"ÊéíÂ∫è","value":[{"n":"Êó∂Èó¥","v":"time"},{"n":"‰∫∫Ê∞î","v":"hits"},{"n":"ËØÑÂàÜ","v":"score"}]}],
		"14":[{"key":"class","name":"ÂâßÊÉÖ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÊÇ¨Áñë","v":"ÊÇ¨Áñë"},{"n":"Ê≠¶‰æ†","v":"Ê≠¶‰æ†"},{"n":"ÁßëÂπª","v":"ÁßëÂπª"},{"n":"ÈÉΩÂ∏Ç","v":"ÈÉΩÂ∏Ç"},{"n":"Áà±ÊÉÖ","v":"Áà±ÊÉÖ"},{"n":"Âè§Ë£Ö","v":"Âè§Ë£Ö"},{"n":"Êàò‰∫â","v":"Êàò‰∫â"},{"n":"ÈùíÊò•","v":"ÈùíÊò•"},{"n":"ÂÅ∂ÂÉè","v":"ÂÅ∂ÂÉè"},{"n":"ÂñúÂâß","v":"ÂñúÂâß"},{"n":"ÂÆ∂Â∫≠","v":"ÂÆ∂Â∫≠"},{"n":"ÁäØÁΩ™","v":"ÁäØÁΩ™"},{"n":"Â•áÂπª","v":"Â•áÂπª"},{"n":"ÂâßÊÉÖ","v":"ÂâßÊÉÖ"},{"n":"‰π°Êùë","v":"‰π°Êùë"},{"n":"Âπ¥‰ª£","v":"Âπ¥‰ª£"},{"n":"Ë≠¶Âå™","v":"Ë≠¶Âå™"},{"n":"Ë∞çÊàò","v":"Ë∞çÊàò"},{"n":"ÂÜíÈô©","v":"ÂÜíÈô©"},{"n":"ÁΩ™Ê°à","v":"ÁΩ™Ê°à"},{"n":"ÂÆ´Âª∑","v":"ÂÆ´Âª∑"},{"n":"BL","v":"BL"}]},{"key":"area","name":"Âú∞Âå∫","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"üáπüáºÂè∞Êπæ","v":"Âè∞Êπæ"},{"n":"Ê≥∞ÂõΩ","v":"Ê≥∞ÂõΩ"}]},{"key":"year","name":"Âπ¥‰ªΩ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"}]},{"key":"letter","name":"Â≠óÊØç","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"A","v":"A"},{"n":"B","v":"B"},{"n":"C","v":"C"},{"n":"D","v":"D"},{"n":"E","v":"E"},{"n":"F","v":"F"},{"n":"G","v":"G"},{"n":"H","v":"H"},{"n":"I","v":"I"},{"n":"J","v":"J"},{"n":"K","v":"K"},{"n":"L","v":"L"},{"n":"M","v":"M"},{"n":"N","v":"N"},{"n":"O","v":"O"},{"n":"P","v":"P"},{"n":"Q","v":"Q"},{"n":"R","v":"R"},{"n":"S","v":"S"},{"n":"T","v":"T"},{"n":"U","v":"U"},{"n":"V","v":"V"},{"n":"W","v":"W"},{"n":"X","v":"X"},{"n":"Y","v":"Y"},{"n":"Z","v":"Z"}]},{"key":"by","name":"ÊéíÂ∫è","value":[{"n":"Êó∂Èó¥","v":"time"},{"n":"‰∫∫Ê∞î","v":"hits"},{"n":"ËØÑÂàÜ","v":"score"}]}],
		"20":[{"key":"class","name":"ÂâßÊÉÖ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"ÊÇ¨Áñë","v":"ÊÇ¨Áñë"},{"n":"Ê≠¶‰æ†","v":"Ê≠¶‰æ†"},{"n":"ÁßëÂπª","v":"ÁßëÂπª"},{"n":"ÈÉΩÂ∏Ç","v":"ÈÉΩÂ∏Ç"},{"n":"Áà±ÊÉÖ","v":"Áà±ÊÉÖ"},{"n":"Âè§Ë£Ö","v":"Âè§Ë£Ö"},{"n":"Êàò‰∫â","v":"Êàò‰∫â"},{"n":"ÈùíÊò•","v":"ÈùíÊò•"},{"n":"ÂÅ∂ÂÉè","v":"ÂÅ∂ÂÉè"},{"n":"ÂñúÂâß","v":"ÂñúÂâß"},{"n":"ÂÆ∂Â∫≠","v":"ÂÆ∂Â∫≠"},{"n":"ÁäØÁΩ™","v":"ÁäØÁΩ™"},{"n":"Â•áÂπª","v":"Â•áÂπª"},{"n":"ÂâßÊÉÖ","v":"ÂâßÊÉÖ"},{"n":"‰π°Êùë","v":"‰π°Êùë"},{"n":"Âπ¥‰ª£","v":"Âπ¥‰ª£"},{"n":"Ë≠¶Âå™","v":"Ë≠¶Âå™"},{"n":"Ë∞çÊàò","v":"Ë∞çÊàò"},{"n":"ÂÜíÈô©","v":"ÂÜíÈô©"},{"n":"ÁΩ™Ê°à","v":"ÁΩ™Ê°à"},{"n":"ÂÆ´Âª∑","v":"ÂÆ´Âª∑"},{"n":"BL","v":"BL"}]},{"key":"year","name":"Âπ¥‰ªΩ","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"}]},{"key":"letter","name":"Â≠óÊØç","value":[{"n":"ÂÖ®ÈÉ®","v":""},{"n":"A","v":"A"},{"n":"B","v":"B"},{"n":"C","v":"C"},{"n":"D","v":"D"},{"n":"E","v":"E"},{"n":"F","v":"F"},{"n":"G","v":"G"},{"n":"H","v":"H"},{"n":"I","v":"I"},{"n":"J","v":"J"},{"n":"K","v":"K"},{"n":"L","v":"L"},{"n":"M","v":"M"},{"n":"N","v":"N"},{"n":"O","v":"O"},{"n":"P","v":"P"},{"n":"Q","v":"Q"},{"n":"R","v":"R"},{"n":"S","v":"S"},{"n":"T","v":"T"},{"n":"U","v":"U"},{"n":"V","v":"V"},{"n":"W","v":"W"},{"n":"X","v":"X"},{"n":"Y","v":"Y"},{"n":"Z","v":"Z"}]},{"key":"by","name":"ÊéíÂ∫è","value":[{"n":"Êó∂Èó¥","v":"time"},{"n":"‰∫∫Ê∞î","v":"hits"},{"n":"ËØÑÂàÜ","v":"score"}]}]
	};

    return JSON.stringify({
        class: classes,
        filters: filterObj,
    });
}

async function homeVod() {
    const link = HOST + '/vodshow/2--hits---------.html';
    const html = await request(link);
    const $ = load(html);
    const items = $('div.myui-panel_bd > ul.myui-vodlist > li');
    let videos = _.map(items, (item) => {
        const it = $(item).find('a:first')[0];
        const remarks = $($(item).find('span.pic-text')[0]).text().trim();
        return {
            vod_id: it.attribs.href.replace(/.*?\/voddetail\/(.*).html/g, '$1'),
            vod_name: it.attribs.title,
            vod_pic: it.attribs['data-original'],
            vod_remarks: remarks || '',
        };
    });
    return JSON.stringify({
        list: videos,
    });
}

async function category(tid, pg, filter, extend) {
    if (pg <= 0) pg = 1;
    const link = HOST + '/vodshow/' + (extend.CateId || tid) + '-'+(extend.area || '')+'-'+(extend.by || 'time')+'-'+(extend.class || '')+'-'+(extend.lang || '')+'-'+(extend.letter || '')+'---' + (`${pg}`) + '---'+(extend.year || '')+'.html';
    const html = await request(link);
    const $ = load(html);
    const items = $('div.myui-panel_bd > ul.myui-vodlist > li');
    let videos = _.map(items, (item) => {
        const it = $(item).find('a:first')[0];
        const remarks = $($(item).find('span.pic-text')[0]).text().trim();
        return {
            vod_id: it.attribs.href.replace(/.*?\/voddetail\/(.*).html/g, '$1'),
            vod_name: it.attribs.title,
            vod_pic: it.attribs['data-original'],
            vod_remarks: remarks || '',
        };
    });
    const hasMore = $('ul.myui-page > li > a:contains(‰∏ã‰∏ÄÈ°µ)').length > 0;
    const pgCount = hasMore ? parseInt(pg) + 1 : parseInt(pg);
    return JSON.stringify({
        page: parseInt(pg),
        pagecount: pgCount,
        limit: 24,
        total: 24 * pgCount,
        list: videos,
    });
}

async function detail(id) {
    const html = await request(HOST + '/voddetail/' + id + '.html');
    const $ = load(html);
    let vod = {
        vod_id: id,
        vod_name: $('h1:first').text().trim(),
        vod_type: $('.myui-content__detail p:first a').text(),
        vod_actor: $('.myui-content__detail p:nth-child(5)').text().replace('‰∏ªÊºîÔºö',''),
        vod_director: $('.myui-content__detail p:nth-child(6)').text().replace('ÂØºÊºîÔºö',''),
        vod_pic: $('div.myui-content__thumb img:first').attr('data-original'),
        vod_remarks :$('#rating:first span').text().replace(/\s{2,}/g, ' '),
        vod_content: $('span.data').text().trim(),
    };
    const playlist = _.map($('ul.sort-list > li > a'), (it) => {
        return it.children[0].data + '$' + it.attribs.href.replace(/\/vodplay\/(.*).html/g, '$1');
    });
    // vod.vod_play_from = key;
    vod.vod_play_from = 'ÈÅìÈïøÂú®Á∫ø';
    vod.vod_play_url = playlist.join('#');
    return JSON.stringify({
        list: [vod],
    });
}

async function play(flag, id, flags) {
    const link = HOST + '/vodplay/' + id + '.html';
    const html = await request(link);
    const $ = load(html);
    const js = JSON.parse($('script:contains(player_)').html().replace(/var player_.*=/,''));
    const playUrl = js.url;
    let headers = {
        "referer": HOST+"/static/player/vidjs.html",
    };
    return JSON.stringify({
        parse: 0,
        url: playUrl,
        header: headers,
    });
}

async function search(wd, quick) {
    let data = JSON.parse(await request(HOST + '/index.php/ajax/suggest?mid=1&wd=' + wd + '&limit=50')).list;
    let videos = [];
    for (const vod of data) {
        videos.push({
            vod_id: vod.id,
            vod_name: vod.name,
            vod_pic: vod.pic,
            vod_remarks: '',
        });
    }
    return JSON.stringify({
        list: videos,
        limit: 50,
    });
}

export function __jsEvalReturn() {
    return {
        init: init,
        home: home,
        homeVod: homeVod,
        category: category,
        detail: detail,
        play: play,
        search: search,
    };
}